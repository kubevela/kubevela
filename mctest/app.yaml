#apiVersion: core.oam.dev/v1beta1
#kind: Application
#metadata:
#  name: multicluster-test-app
#  namespace: default
#spec:
#  components:
#    - name: config
#      type: config
#
#  policies:
#    - name: topology-mcluster
#      type: topology
#      properties:
#        clusterLabelSelector: {}
#
#  workflow:
#    steps:
#      - name: deploy-components
#        type: deploy
#        properties:
#          policies: [ "topology-mcluster" ]
#      - name: write-config
#        type: create-config
#        properties:
#          policies: [ "topology-mcluster" ]
#          name: test
#          config:
#            key1: value1
#            key2: 2
#            key3: true
#            key4:
#              key5: value5


apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: gc-order-test
spec:
  components:
    - name: step-1
      type: webservice
      properties:
        image: nginx:1.21
        port: 80

    - name: step-2
      type: webservice
      dependsOn:
        - step-1
      properties:
        image: nginx:1.21
        port: 80

  policies:
    - name: gc-dependency
      type: garbage-collect
      properties:
        order: dependency