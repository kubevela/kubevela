# Code generated by KubeVela templates. DO NOT EDIT. Please edit the original cue file.
# Definition source cue file: vela-templates/definitions/internal/deploy2env.cue
apiVersion: core.oam.dev/v1beta1
kind: WorkflowStepDefinition
metadata:
  annotations:
    definition.oam.dev/description: Deploy env binding component to target env
  labels:
    custom.definition.oam.dev/deprecated: "true"
    custom.definition.oam.dev/ui-hidden: "true"
  name: deploy2env
  namespace: {{ include "systemDefinitionNamespace" . }}
spec:
  schematic:
    cue:
      template: |
        import (
        	"vela/op"
        )

        app: op.#ApplyEnvBindApp & {
        	env:      parameter.env
        	policy:   parameter.policy
        	parallel: parameter.parallel
        	app:      context.name
        	// context.namespace indicates the namespace of the app
        	namespace: context.namespace
        }
        parameter: {
        	// +usage=Declare the name of the env-binding policy, if empty, the first env-binding policy will be used
        	policy: *"" | string
        	// +usage=Declare the name of the env in policy
        	env: string
        	// +usage=components are applied in parallel
        	parallel: *false | bool
        }

