# Code generated by KubeVela templates. DO NOT EDIT. Please edit the original cue file.
# Definition source cue file: vela-templates/definitions/internal/config-dex-connector.cue
apiVersion: core.oam.dev/v1beta1
kind: ComponentDefinition
metadata:
  annotations:
    custom.definition.oam.dev/alias.config.oam.dev: Dex Connector
    definition.oam.dev/description: Config information to authenticate Dex connectors
  labels:
    custom.definition.oam.dev/catalog.config.oam.dev: velacore-config
    custom.definition.oam.dev/multi-cluster.config.oam.dev: "false"
    custom.definition.oam.dev/type.config.oam.dev: dex-connector
  name: config-dex-connector
  namespace: {{ include "systemDefinitionNamespace" . }}
spec:
  schematic:
    cue:
      template: |
        output: {
        	apiVersion: "v1"
        	kind:       "Secret"
        	metadata: {
        		name:      parameter.name
        		namespace: context.namespace
        		labels: {
        			"config.oam.dev/catalog":       "velacore-config"
        			"config.oam.dev/type":          "dex-connector"
        			"config.oam.dev/multi-cluster": "false"
        			"config.oam.dev/identifier":    parameter.name
        		}
        	}
        	type: "Opaque"

        	if parameter.type == "github" {
        		stringData: {
        			clientID:     parameter.clientID
        			clientSecret: parameter.clientSecret
        			callbackURL:  parameter.callbackURL
        		}
        	}
        	if parameter.type == "ldap" {
        		stringData: {
        			host:               parameter.host
        			insecureNoSSL:      parameter.insecureNoSSL
        			insecureSkipVerify: parameter.insecureSkipVerify
        			startTLS:           parameter.startTLS
        			userSearch:         parameter.userSearch
        		}
        	}
        }
        parameter: {
        	// +usage=Config name
        	name: string
        	// +usage=Config type
        	type: "github" | "ldap"
        	if type == "github" {
        		// +usage=GitHub client ID
        		clientID: string
        		// +usage=GitHub client secret
        		clientSecret: string
        		// +usage=GitHub call back URL
        		callbackURL: string
        	}
        	if type == "ldap" {
        		host:               string
        		insecureNoSSL:      *true | bool
        		insecureSkipVerify: bool
        		startTLS:           bool
        		usernamePrompt:     string
        		userSearch: {
        			baseDN:    string
        			username:  string
        			idAttr:    string
        			emailAttr: string
        			nameAttr:  string
        		}
        	}
        }
  workload:
    type: autodetects.core.oam.dev

