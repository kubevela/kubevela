apiVersion: "v1"
kind:       "ConfigMap"
metadata:
  name:      "application-resource-tree-view"
  namespace: {{ include "systemDefinitionNamespace" . }}
data:
  template: |
    import (
        "vela/ql"
    )
    parameter: {
        appName:    string
        appNs:      string
    }
    response: ql.#GetApplicationTree & {
        app: {
            name:      parameter.appName
            namespace: parameter.appNs
        }
    }

    if response.err == _|_ {
        status: {
            resources: response.list
        }
    }
    if response.err != _|_ {
        status: {
            error: response.err
        }
    }