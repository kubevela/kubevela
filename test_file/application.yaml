apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: def-rev-limit-test-application
  labels:
    test : testing
spec:
  components:
    - name: mycomponent
      type: configmap-component@v1
      properties:
        firstkey: "2"
        secondkey: "3"

    - name: frontend
      type: containerizedservice   # our custom component
      properties:
        image: "bitnami/nginx:latest"       # the container image you want
        replicas: 2
      traits:
        - type: myhpa
          properties:
            targetAPIVersion: "apps/v1"
            targetKind: "Deployment"
            minReplicas: 2
        - type: resource
          properties:
            cpu: 1
            memory: 2Gi
            requests:
              cpu: 1
              memory: 2Gi
            limits:
              cpu: 2
              memory: 3Gi

  policies:
    - type: mypolicy
      name: mypolicy
      properties:
        name: testcm
        namespace: vela-system
        data:
          "key" : "3"

#  workflow:
#    steps:
#      - name: myworkflow
#        type: myworkflow
#        properties:
#          name: workflowcm
#          namespace: vela-system
#          data:
#            "Hello": "World"
